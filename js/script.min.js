var forEachNode=function(e,a){for(var t=0;t<e.length;t++)a(e[t],t)},mainSlider=document.querySelectorAll(".popular-slider-item"),mainSliderControls=document.querySelectorAll(".main-page-popular .slider-control"),currentSlide=0;forEachNode(mainSliderControls,function(e,a){e.classList.contains("current")&&(currentSlide=a),e.addEventListener("click",function(e){e.preventDefault(),mainSlider[currentSlide].classList.remove("current"),mainSlider[a].classList.add("current"),mainSliderControls[currentSlide].classList.remove("current"),mainSliderControls[a].classList.add("current"),currentSlide=a})});var advantagesSlider=document.querySelectorAll(".advantages-slider-item"),advantagesSliderControls=document.querySelectorAll(".advantages-slider-controls li"),currentAdvantageSlide=0;forEachNode(advantagesSliderControls,function(e,a){e.classList.contains("current")&&(currentAdvantageSlide=a),e.firstChild.addEventListener("click",function(e){e.preventDefault(),advantagesSlider[currentAdvantageSlide].classList.remove("current"),advantagesSlider[a].classList.add("current"),advantagesSliderControls[currentAdvantageSlide].classList.remove("advantages-current"),advantagesSliderControls[a].classList.add("advantages-current"),currentAdvantageSlide=a})});var modalMap=document.querySelector(".modal-map"),mapLink=document.querySelector(".map-popup"),mapClose=document.querySelector(".modal-map .modal-close");mapLink.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.remove("hide")}),mapClose.addEventListener("click",function(e){e.preventDefault(),modalMap.classList.add("hide")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modalMap.classList.contains("hide")||modalMap.classList.add("hide"))});var modalFeedback=document.querySelector(".modal-feedback"),feedbackLink=document.querySelector(".contacts .write-us"),feedbackClose=document.querySelector(".modal-feedback .modal-close"),feedbackForm=modalFeedback.querySelector(".feedback-form"),nameField=feedbackForm.querySelector("[name=name]"),emailField=feedbackForm.querySelector("[name=email]"),messageField=feedbackForm.querySelector("[name=message]"),feedbackFormData=[nameField,emailField,messageField];feedbackLink.addEventListener("click",function(e){e.preventDefault(),modalFeedback.classList.remove("hide"),feedbackFormData.forEach(function(e){var a=localStorage.getItem(e.name);a&&(e.value=a)}),modalFeedback.querySelector("[name=name]").focus()}),feedbackClose.addEventListener("click",function(e){e.preventDefault(),modalFeedback.classList.add("hide")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),modalFeedback.classList.contains("hide")||modalFeedback.classList.add("hide"))});var isValid=function(e){return""==e.value?(e.classList.remove("invalid"),e.offsetWidth=e.offsetWidth,e.classList.add("invalid"),console.warn("Не заполнено поле "+e.name),!1):(e.classList.remove("invalid"),!0)};feedbackForm.addEventListener("submit",function(e){e.preventDefault(),isValid(nameField)&isValid(emailField)&isValid(messageField)&&(localStorage.clear(),feedbackForm.submit())}),feedbackFormData.forEach(function(a){a.addEventListener("input",function(e){localStorage.setItem(e.srcElement.name,e.srcElement.value),isValid(a)})});
